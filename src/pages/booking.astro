---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE } from '../consts';

// Surveycake æˆ– Google è¡¨å–®åµŒå…¥ URL
const FORM_EMBED_URL = "https://docs.google.com/forms/d/e/YOUR_FORM_ID/viewform?embedded=true";
---

<!doctype html>
<html lang="zh-Hant">
	<head>
		<BaseHead
			title={`é ç´„è«®è©¢ - ${SITE_TITLE}`}
			description="é ç´„é˜¿æ°åšå£«çš„å…è²»ä»£è¬å¥åº·è«®è©¢"
		/>
	</head>
	<body>
		<Header />
		<main class="booking-page">
			<div class="booking-container">
				<div class="booking-header">
					<h1>é ç´„å…è²»è«®è©¢</h1>
					<p>å¡«å¯«ä»¥ä¸‹è¡¨å–®ï¼Œé˜¿æ°åšå£«æœƒåœ¨ 1-2 å€‹å·¥ä½œå¤©å…§èˆ‡ä½ è¯ç¹«ç¢ºèªè«®è©¢æ™‚é–“</p>
				</div>

				<div class="booking-content">
					<div class="form-section">
						<h2>è«®è©¢é ç´„è¡¨å–®</h2>

						<!-- é¸é … 1: åµŒå…¥ Google Form / Surveycake -->
						<!-- <iframe
							src={FORM_EMBED_URL}
							width="100%"
							height="800"
							frameborder="0"
							marginheight="0"
							marginwidth="0">
							è¼‰å…¥ä¸­...
						</iframe> -->

						<!-- é¸é … 2: è‡ªå»ºè¡¨å–®ï¼ˆé€£çµåˆ° Google Formï¼‰ -->
						<form id="booking-form" class="booking-form">
							<div class="form-group">
								<label for="name">å§“åèˆ‡ç¨±å‘¼ *</label>
								<input type="text" id="name" name="name" required placeholder="ä¾‹ï¼šç‹å°æ˜ å…ˆç”Ÿ" />
							</div>

							<div class="form-group">
								<label for="email">Email *</label>
								<input type="email" id="email" name="email" required placeholder="your@email.com" />
							</div>

							<div class="form-group">
								<label>ä½ ç›®å‰æœ€å›°æ“¾çš„å¥åº·å•é¡Œï¼Ÿï¼ˆå¯è¤‡é¸ï¼‰*</label>
								<div class="checkbox-group">
									<label class="checkbox-label">
										<input type="checkbox" name="concerns" value="weight" /> é«”é‡ç®¡ç†
									</label>
									<label class="checkbox-label">
										<input type="checkbox" name="concerns" value="metabolic" /> ä¸‰é«˜å•é¡Œ
									</label>
									<label class="checkbox-label">
										<input type="checkbox" name="concerns" value="fatigue" /> æ…¢æ€§ç–²å‹
									</label>
									<label class="checkbox-label">
										<input type="checkbox" name="concerns" value="sleep" /> ç¡çœ å“è³ª
									</label>
									<label class="checkbox-label">
										<input type="checkbox" name="concerns" value="other" /> å…¶ä»–
									</label>
								</div>
							</div>

							<div class="form-group">
								<label for="treatment">æ˜¯å¦æœ‰é€²è¡Œä¸­çš„é†«ç™‚æ²»ç™‚ï¼Ÿ</label>
								<select id="treatment" name="treatment">
									<option value="no">å¦</option>
									<option value="yes">æ˜¯ï¼ˆè«‹åœ¨ä¸‹æ–¹èªªæ˜ï¼‰</option>
								</select>
							</div>

							<div class="form-group" id="treatment-detail-group" style="display: none;">
								<label for="treatment-detail">è«‹ç°¡è¿°ç›®å‰çš„æ²»ç™‚æƒ…æ³</label>
								<textarea id="treatment-detail" name="treatment-detail" rows="3" placeholder="ä¾‹ï¼šç›®å‰æœç”¨é™è¡€å£“è—¥ç‰©..."></textarea>
							</div>

							<div class="form-group">
								<label for="goal">ä½ å¸Œæœ›åœ¨ 90 å¤©å¾Œé”æˆä»€éº¼ç›®æ¨™ï¼Ÿ*</label>
								<textarea id="goal" name="goal" rows="3" required placeholder="ä¾‹ï¼šæ¸›é‡ 5 å…¬æ–¤ã€æ”¹å–„é¤å¾Œå—œç¡ã€é™ä½è¡€ç³–æŒ‡æ•¸..."></textarea>
							</div>

							<div class="form-group">
								<label>æ–¹ä¾¿è«®è©¢çš„æ™‚æ®µï¼Ÿï¼ˆå¯è¤‡é¸ï¼‰*</label>
								<div class="checkbox-group">
									<label class="checkbox-label">
										<input type="checkbox" name="time" value="weekday-morning" /> å¹³æ—¥ä¸Šåˆ
									</label>
									<label class="checkbox-label">
										<input type="checkbox" name="time" value="weekday-afternoon" /> å¹³æ—¥ä¸‹åˆ
									</label>
									<label class="checkbox-label">
										<input type="checkbox" name="time" value="weekday-evening" /> å¹³æ—¥æ™šä¸Š
									</label>
									<label class="checkbox-label">
										<input type="checkbox" name="time" value="weekend" /> é€±æœ«
									</label>
								</div>
							</div>

							<div class="form-group">
								<label for="source">ä½ æ˜¯å¦‚ä½•èªè­˜é˜¿æ°åšå£«çš„ï¼Ÿ</label>
								<select id="source" name="source">
									<option value="">è«‹é¸æ“‡</option>
									<option value="search">Google æœå°‹</option>
									<option value="youtube">YouTube</option>
									<option value="instagram">Instagram</option>
									<option value="referral">æœ‹å‹ä»‹ç´¹</option>
									<option value="other">å…¶ä»–</option>
								</select>
							</div>

							<button type="submit" class="submit-btn">é€å‡ºé ç´„ç”³è«‹</button>
						</form>
					</div>

					<div class="info-section">
						<div class="info-card">
							<h3>è«®è©¢åŒ…å«ä»€éº¼ï¼Ÿ</h3>
							<ul>
								<li>30 åˆ†é˜ä¸€å°ä¸€è¦–è¨Šè«®è©¢</li>
								<li>åˆæ­¥å¥åº·ç‹€æ³è©•ä¼°</li>
								<li>å€‹äººåŒ–æ”¹å–„æ–¹å‘å»ºè­°</li>
								<li>è§£ç­”ä½ çš„å¥åº·ç–‘å•</li>
							</ul>
						</div>

						<div class="info-card">
							<h3>è«®è©¢å‰æº–å‚™</h3>
							<ul>
								<li>è¿‘æœŸå¥æª¢å ±å‘Šï¼ˆå¦‚æœ‰ï¼‰</li>
								<li>ç›®å‰ç”¨è—¥æ¸…å–®ï¼ˆå¦‚æœ‰ï¼‰</li>
								<li>æƒ³è©¢å•çš„å•é¡Œåˆ—è¡¨</li>
							</ul>
						</div>

						<div class="quiz-prompt">
							<p>é‚„æ²’åšéä»£è¬å¹´é½¡æ¸¬é©—ï¼Ÿ</p>
							<a href="/quiz" class="quiz-link">å…ˆåšå…è²»æ¸¬é©— â†’</a>
						</div>
					</div>
				</div>
			</div>

			<!-- Success Modal -->
			<div id="success-modal" class="modal" style="display: none;">
				<div class="modal-content">
					<div class="modal-icon">âœ…</div>
					<h2>å·²æ”¶åˆ°ä½ çš„é ç´„ç”³è«‹ï¼</h2>
					<p>é˜¿æ°åšå£«æœƒåœ¨ 1-2 å€‹å·¥ä½œå¤©å…§ï¼Œé€é Email èˆ‡ä½ ç¢ºèªè«®è©¢æ™‚é–“ã€‚</p>
					<div class="modal-video">
						<p>åœ¨ç­‰å¾…æœŸé–“ï¼Œæ¨è–¦ä½ å…ˆè§€çœ‹ï¼š</p>
						<a href="https://www.youtube.com/@AugustLin123" target="_blank" class="video-link">
							ğŸ¬ ä»€éº¼æ˜¯ä»£è¬éˆæ´»æ€§ï¼Ÿ
						</a>
					</div>
					<a href="/" class="modal-btn">è¿”å›é¦–é </a>
				</div>
			</div>
		</main>
		<Footer />

		<style>
			.booking-page {
				padding: 2rem 1rem;
			}

			.booking-container {
				max-width: 1000px;
				margin: 0 auto;
			}

			.booking-header {
				text-align: center;
				margin-bottom: 3rem;
			}

			.booking-header h1 {
				color: var(--accent-dark);
				margin-bottom: 0.5rem;
			}

			.booking-header p {
				color: rgb(var(--gray));
			}

			.booking-content {
				display: grid;
				grid-template-columns: 1fr;
				gap: 2rem;
			}

			@media (min-width: 768px) {
				.booking-content {
					grid-template-columns: 2fr 1fr;
				}
			}

			/* Form styles */
			.form-section {
				background: white;
				padding: 2rem;
				border-radius: var(--border-radius);
				box-shadow: var(--box-shadow);
			}

			.form-section h2 {
				font-size: 1.3rem;
				margin-bottom: 1.5rem;
				color: rgb(var(--black));
			}

			.form-group {
				margin-bottom: 1.5rem;
			}

			.form-group label {
				display: block;
				margin-bottom: 0.5rem;
				font-weight: 600;
				color: rgb(var(--gray-dark));
			}

			.form-group input[type="text"],
			.form-group input[type="email"],
			.form-group select,
			.form-group textarea {
				width: 100%;
				padding: 0.75rem 1rem;
				border: 2px solid rgb(var(--gray-light));
				border-radius: var(--border-radius);
				font-size: 1rem;
				transition: border-color var(--transition-fast);
			}

			.form-group input:focus,
			.form-group select:focus,
			.form-group textarea:focus {
				outline: none;
				border-color: var(--accent);
			}

			.checkbox-group {
				display: flex;
				flex-wrap: wrap;
				gap: 0.75rem;
			}

			.checkbox-label {
				display: flex;
				align-items: center;
				gap: 0.5rem;
				padding: 0.5rem 1rem;
				border: 1px solid rgb(var(--gray-light));
				border-radius: var(--border-radius);
				cursor: pointer;
				transition: all var(--transition-fast);
				font-weight: normal;
			}

			.checkbox-label:hover {
				border-color: var(--accent);
			}

			.checkbox-label input:checked + .checkbox-label,
			.checkbox-label:has(input:checked) {
				background: var(--bg-warm);
				border-color: var(--accent);
			}

			.submit-btn {
				width: 100%;
				padding: 1rem;
				background: var(--accent);
				color: white;
				border: none;
				border-radius: var(--border-radius);
				font-size: 1.1rem;
				font-weight: 700;
				cursor: pointer;
				transition: all var(--transition-fast);
			}

			.submit-btn:hover {
				background: var(--accent-dark);
			}

			/* Info section */
			.info-section {
				display: flex;
				flex-direction: column;
				gap: 1.5rem;
			}

			.info-card {
				background: white;
				padding: 1.5rem;
				border-radius: var(--border-radius);
				box-shadow: var(--box-shadow);
			}

			.info-card h3 {
				font-size: 1.1rem;
				color: var(--accent-dark);
				margin-bottom: 1rem;
			}

			.info-card ul {
				list-style: none;
				padding: 0;
				margin: 0;
			}

			.info-card li {
				padding: 0.5rem 0;
				color: rgb(var(--gray-dark));
				border-bottom: 1px solid rgb(var(--gray-light));
			}

			.info-card li:last-child {
				border-bottom: none;
			}

			.info-card li::before {
				content: "âœ“ ";
				color: var(--health-green);
			}

			.quiz-prompt {
				background: var(--bg-science);
				padding: 1.5rem;
				border-radius: var(--border-radius);
				text-align: center;
			}

			.quiz-prompt p {
				margin-bottom: 0.5rem;
				color: rgb(var(--gray));
			}

			.quiz-link {
				color: var(--science-blue);
				font-weight: 600;
				text-decoration: none;
			}

			.quiz-link:hover {
				text-decoration: underline;
			}

			/* Modal */
			.modal {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.5);
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 1000;
				padding: 1rem;
			}

			.modal-content {
				background: white;
				padding: 3rem 2rem;
				border-radius: var(--border-radius);
				max-width: 500px;
				width: 100%;
				text-align: center;
			}

			.modal-icon {
				font-size: 3rem;
				margin-bottom: 1rem;
			}

			.modal-content h2 {
				color: var(--health-green);
				margin-bottom: 1rem;
			}

			.modal-content p {
				color: rgb(var(--gray-dark));
				margin-bottom: 1.5rem;
			}

			.modal-video {
				background: var(--bg-warm);
				padding: 1rem;
				border-radius: var(--border-radius);
				margin-bottom: 1.5rem;
			}

			.modal-video p {
				margin-bottom: 0.5rem;
				font-size: 0.9rem;
			}

			.video-link {
				color: var(--accent);
				font-weight: 600;
				text-decoration: none;
			}

			.modal-btn {
				display: inline-block;
				padding: 0.75rem 2rem;
				background: var(--accent);
				color: white;
				text-decoration: none;
				border-radius: var(--border-radius);
				font-weight: 600;
			}
		</style>

		<script>
			// Show/hide treatment detail field
			const treatmentSelect = document.getElementById('treatment') as HTMLSelectElement;
			const treatmentDetailGroup = document.getElementById('treatment-detail-group') as HTMLElement;

			treatmentSelect?.addEventListener('change', () => {
				treatmentDetailGroup.style.display = treatmentSelect.value === 'yes' ? 'block' : 'none';
			});

			// Form submission
			const bookingForm = document.getElementById('booking-form') as HTMLFormElement;
			const successModal = document.getElementById('success-modal') as HTMLElement;

			bookingForm?.addEventListener('submit', (e) => {
				e.preventDefault();

				// Collect form data
				const formData = new FormData(bookingForm);
				const data: Record<string, any> = {};

				formData.forEach((value, key) => {
					if (data[key]) {
						if (Array.isArray(data[key])) {
							data[key].push(value);
						} else {
							data[key] = [data[key], value];
						}
					} else {
						data[key] = value;
					}
				});

				console.log('Booking form data:', data);

				// TODO: Send to Google Form / Surveycake / Backend
				// For now, just show success modal
				successModal.style.display = 'flex';
			});
		</script>
	</body>
</html>
